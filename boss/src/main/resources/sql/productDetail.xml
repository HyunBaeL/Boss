<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="boss.dao.ProductDetailDao">

	<!-- 상품 가져오기 -->
	<select id="selectProduct" parameterType="String"
		resultType="product">
		select *
		from product where pid=#{pid}
	</select>

	<!-- 리뷰 리스트 가져오기 -->
	<select id="selectMemberReview" parameterType="String"
		resultType="review">

		select * from review where memail = #{memail}

	</select>

	<!-- 한명의 리뷰 가져오기 -->
	<select id="selectReviewOne" resultType="review"
		parameterType="String">
		SELECT * FROM review where memail = #{memail}
	</select>

	<!-- 리뷰 상세 페이지 -->
	<select id="prselect" resultType="review" parameterType="int">
		SELECT *
		FROM review where rid = #{rid}
	</select>

	<!-- 리뷰 합계 -->
	<select id="total" resultType="int">
		select count(*) from review
	</select>

	<!-- 상세페이지 리뷰 리스트 뽑아오기 -->
	<select id="list" resultType="review" parameterType="map">
		select *
		FROM (
		SELECT ROWNUM RN, A.*
		FROM ( SELECT *
		FROM review
		ORDER BY rreg
		desc) A
		)
		WHERE pid = #{pid} and RN BETWEEN #{pp.startRow} AND
		#{pp.endRow}
	</select>

	<!-- 이메일로 주문 정보 받아오기 -->
	<select id="selectOrders" resultType="orders"
		parameterType="String">
		select * from orders where memail = #{memail}
	</select>



	<!-- 리뷰 게시판 작성 -->
	<insert id="reviewInsert" parameterType="review">
		insert into review
		values (
		REAVIEW_SEQ.nextval,
		#{memail}, #{oid}, #{pid},
		#{rwriter},
		#{rtitle},
		#{rimage}, sysdate, 0, 'N', #{rcontent}
		)
	</insert>

	<!-- 리뷰 업데이트 폼 -->








</mapper>