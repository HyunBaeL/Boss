<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="boss.dao.ProductDetailDao">

	<!-- 상품 가져오기 -->
	<select id="selectProduct" parameterType="String"
		resultType="product">
		select *
		from product where pid=#{pid}
	</select>

	<!-- 리뷰 리스트 가져오기 -->
	<select id="selectMemberReview" parameterType="String"
		resultType="review">

		select * from review where memail = #{memail}

	</select>

	<!-- 한명의 리뷰 가져오기 -->
	<select id="selectReviewOne" resultType="review"
		parameterType="String">
		SELECT * FROM review where memail = #{memail}
	</select>

	<select id="prselect" resultType="review" parameterType="int">
		SELECT *
		FROM review where rid = #{rid}
	</select>


	<select id="total" resultType="int">
		select count(*) from review
	</select>

	<!-- 페이징 처리 후 게시글 조회 -->
	<select id="list" resultType="review" parameterType="pagePgm">
		SELECT *
		FROM (
		SELECT ROWNUM RN, A.*
		FROM (
		SELECT *
		FROM review
		ORDER BY rReg DESC
		) A
		)
		WHERE RN BETWEEN #{startRow} AND #{endRow}
	</select>

	<!-- 리뷰 게시판 작성 -->
	<insert id="reviewInsert" parameterType="Map">
		insert into review
		values (
		REAVIEW_SEQ.nextval,
		#{memail}, #{oid}, #{pid},
		#{rwriter}, #{rtitle},
		#{rimage}, sysdate, 0, default, #{rcontent}
		)
	</insert>











</mapper>